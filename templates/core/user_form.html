{% extends "base/layout.html" %}
{% block title %}Kullanıcı{% endblock %}

{% block content %}
<div class="d-flex align-items-center justify-content-between mb-3">
  <h3 class="mb-0">
    {% if mode == "create" %}Yeni Kullanıcı{% else %}Kullanıcı Düzenle{% endif %}
  </h3>
  <a href="/users/" class="btn btn-sm btn-outline-secondary"><i class="fas fa-arrow-left"></i> Liste</a>
</div>

<div class="card">
  <div class="card-body">
    <form method="post">
      {% csrf_token %}

      {% if form.non_field_errors %}
        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
      {% endif %}

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Kullanıcı Adı</label>
            {{ form.username }}
            <small class="text-danger">{{ form.username.errors }}</small>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>E-posta</label>
            {{ form.email }}
            <small class="text-danger">{{ form.email.errors }}</small>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Ad</label>
            {{ form.first_name }}
            <small class="text-danger">{{ form.first_name.errors }}</small>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Soyad</label>
            {{ form.last_name }}
            <small class="text-danger">{{ form.last_name.errors }}</small>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Yetki Grupları</label>
        {{ form.groups }}
        <small class="text-muted">ADMIN / USTA gibi grupları seç.</small>
        <small class="text-danger d-block">{{ form.groups.errors }}</small>
      </div>

      {% if mode == "create" %}
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label>Şifre</label>
            {{ form.password1 }}
            <small class="text-danger">{{ form.password1.errors }}</small>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <label>Şifre (Tekrar)</label>
            {{ form.password2 }}
            <small class="text-danger">{{ form.password2.errors }}</small>
          </div>
        </div>
      </div>
      {% else %}
      <div class="row">
        <div class="col-md-4">
          <div class="form-group">
            <label>Aktif</label><br>
            {{ form.is_active }}
            <small class="text-danger d-block">{{ form.is_active.errors }}</small>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label>Yeni Şifre</label>
            {{ form.new_password1 }}
            <small class="text-danger">{{ form.new_password1.errors }}</small>
          </div>
        </div>
        <div class="col-md-4">
          <div class="form-group">
            <label>Yeni Şifre (Tekrar)</label>
            {{ form.new_password2 }}
            <small class="text-danger">{{ form.new_password2.errors }}</small>
          </div>
        </div>
      </div>
      {% endif %}

      <button class="btn btn-danger" type="submit"><i class="fas fa-save"></i> Kaydet</button>
    </form>
  </div>
</div>
{% endblock %}
